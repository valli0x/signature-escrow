# весь смысл проекта и план ниже, опирайся на него 


# Обмен токенами между BTC и ETH сетью.

### 1. Мультиподписи
В BTC сети для подписей транзакций используется подпись Шнорра, в ETH - ECDSA.
Из обоих схем можно сделать мультиподписи с порогом(https://github.com/taurusgroup/multi-party-sig). 
Т.е. 2 участника могут сформировать 1 общий адрес с 2 приватными частями с порогом в 2.
Т.е. для отправки транзакций нужно по одной приватной части от каждого участника.

### 2. ESCROW

1. (Keygen stage) 
   Алиса и Боб могут сформировать 2 escrow счета в сети BTC и ETH.
   В ETH и BTC могут сформировать одну пару ключей ECDSA и использовать
   ее как escrow счет в ETH и BTC. На данный момент участники формируют
   пары ключей ECDSA(для ETH) и Shcnorr(для BTC), чтобы в дальнейшем использовать
   их как 3 счета, которые контролируют обе стороны.

2. (Check stage)
   Aлиса и Боб отправляют токены на общие счета и проверяют их на пополнение нужной суммы.
   Стороны не начнут взаимодействие, если нужное кол-во токенов не будет на esrow счетах.

3. (Hash tx of withdrawal stage, exchange_wishes.png scheme) 
   Стороны отправляют хеши транзакций со своей неполной подписью о выводе токенов с нужной им сети. 
   Т.е. каждый участник имеет подпись транзакции, которая выводит токены друг друга. Далее им нужно
   будет обменяться этими подписями, убедившись в отправке подписи и правильности ее.
	
   Alice, Bob saved their hashes tx of withdrawal(own hashes)
   Alice(hash tx of withdrawal with part of signature) <-> Bob(hash tx of withdrawal with part of signature)
	
4. (Escrow exchange stage, escrwo_agent_works.png)
   Далее участники отправляют агенту публичный ключ и хеш транзакции о выводе своих токенов для проверки
   подписи, которую пришлет другой участник. Также отправляют полную подпись о выводе средств другого участника из escrow счета. 
   Агент имея сигнатуры и хеши транзакций, а также публичные ключи escrow счетов,
   проверяет перекрестно подписи участников с помощью пуб ключа и хеша транзакции для вывода средств
   и если они правильные, отправляет подписи сторонам.
	
   Alice(send own tx hash and Bob's signature) -> agent
   Bob(send own tx hash and Alice's signature) -> agent

```
		    Escrow pub key 1
Alice signature(Bob tokens) <-> Bob hash(Bob tokens)
		    Escrow pub key 2
Alice hash(Alice tokens)    <-> Bob signature(Alice tokens)
```
